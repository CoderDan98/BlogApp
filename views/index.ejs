<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog App</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <header>
      <h1>My Blog</h1>
    </header>

    <main class="main-content">
      <div class="search-container">
        <input
          type="text"
          id="searchInput"
          class="search-box"
          placeholder="Search posts..."
        />
      </div>
      <ul class="post-list" id="postList">
        <% posts.forEach(post => { %>
        <li class="post-item">
          <div class="post-content">
            <h2><%= post.title %></h2>
            <p>
              <%= post.body.substring(0, 1000) %><% if (post.body.length >=
              1000) { %>...<% } %>
            </p>
          </div>
          <div class="post-actions">
            <% if (post.body.length >= 1000) { %>
            <button
              class="post-btn"
              onclick="window.location.href='/post/<%= post.id %>'"
            >
              Read More
            </button>
            <% } %>
            <button
              class="post-btn"
              onclick="window.location.href='/edit/<%= post.id %>'"
            >
              Edit
            </button>
            <form action="/delete/<%= post.id %>" method="POST">
              <button class="post-btn" type="submit">Delete</button>
            </form>
          </div>
        </li>
        <% }) %>
      </ul>

      <div class="pagination">
        <% if (currentPage > 1) { %>
        <a href="?page=<%= currentPage - 1 %>" class="pagination-btn"
          >Previous</a
        >
        <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
        <a
          href="?page=<%= i %>"
          class="pagination-btn <%= currentPage === i ? 'active' : '' %>"
        >
          <%= i %>
        </a>
        <% } %> <% if (currentPage < totalPages) { %>
        <a href="?page=<%= currentPage + 1 %>" class="pagination-btn">Next</a>
        <% } %>
      </div>

      <button class="new-post-btn" onclick="window.location.href='/new'">
        Add New Post
      </button>
    </main>

    <footer>&copy; <%= currentYear %> - Daniel Sarney</footer>
    <script src="/js/index.js"></script>
  </body>
</html>
